import{WINDOW}from"../../types.js";import{onHidden}from"./onHidden.js";let firstHiddenTime=-1;const initHiddenTime=()=>"hidden"!==WINDOW.document.visibilityState||WINDOW.document.prerendering?1/0:0,trackChanges=()=>{onHidden((({timeStamp:timeStamp})=>{firstHiddenTime=timeStamp}),!0)},getVisibilityWatcher=()=>(firstHiddenTime<0&&(firstHiddenTime=initHiddenTime(),trackChanges()),{get firstHiddenTime(){return firstHiddenTime}});export{getVisibilityWatcher};