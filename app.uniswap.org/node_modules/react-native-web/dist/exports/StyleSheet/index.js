import _objectSpread from"@babel/runtime/helpers/objectSpread2";import _objectWithoutPropertiesLoose from"@babel/runtime/helpers/objectWithoutPropertiesLoose";var _excluded=["writingDirection"];import{atomic,classic,inline}from"./compiler";import{createSheet}from"./dom";import{localizeStyle}from"styleq/transform-localize-style";import{preprocess}from"./preprocess";import{styleq}from"styleq";import{validate}from"./validate";import canUseDOM from"../../modules/canUseDom";var staticStyleMap=new WeakMap,sheet=createSheet(),defaultPreprocessOptions={shadow:!0,textShadow:!0};function customStyleq(styles,options){void 0===options&&(options={});var _options=options,writingDirection=_options.writingDirection,preprocessOptions=_objectWithoutPropertiesLoose(_options,_excluded),isRTL="rtl"===writingDirection;return styleq.factory({transform(style){var compiledStyle=staticStyleMap.get(style);return null!=compiledStyle?localizeStyle(compiledStyle,isRTL):preprocess(style,_objectSpread(_objectSpread({},defaultPreprocessOptions),preprocessOptions))}})(styles)}function insertRules(compiledOrderedRules){compiledOrderedRules.forEach((_ref=>{var rules=_ref[0],order=_ref[1];null!=sheet&&rules.forEach((rule=>{sheet.insert(rule,order)}))}))}function compileAndInsertAtomic(style){var _atomic=atomic(preprocess(style,defaultPreprocessOptions)),compiledStyle=_atomic[0];return insertRules(_atomic[1]),compiledStyle}function compileAndInsertReset(style,key){var _classic=classic(style,key),compiledStyle=_classic[0];return insertRules(_classic[1]),compiledStyle}var absoluteFillObject={position:"absolute",left:0,right:0,top:0,bottom:0},absoluteFill=create({x:_objectSpread({},absoluteFillObject)}).x;function create(styles){return Object.keys(styles).forEach((key=>{var compiledStyles,styleObj=styles[key];null!=styleObj&&!0!==styleObj.$$css&&(key.indexOf("$raw")>-1?compiledStyles=compileAndInsertReset(styleObj,key.split("$raw")[0]):("production"!==process.env.NODE_ENV&&(validate(styleObj),styles[key]=Object.freeze(styleObj)),compiledStyles=compileAndInsertAtomic(styleObj)),staticStyleMap.set(styleObj,compiledStyles))})),styles}function compose(style1,style2){if("production"!==process.env.NODE_ENV){var len=arguments.length;if(len>2){var readableStyles=[...arguments].map((a=>flatten(a)));throw new Error("StyleSheet.compose() only accepts 2 arguments, received "+len+": "+JSON.stringify(readableStyles))}console.warn("StyleSheet.compose(a, b) is deprecated; use array syntax, i.e., [a,b].")}return[style1,style2]}function flatten(){for(var _len=arguments.length,styles=new Array(_len),_key=0;_key<_len;_key++)styles[_key]=arguments[_key];for(var flatArray=styles.flat(1/0),result={},i=0;i<flatArray.length;i++){var style=flatArray[i];null!=style&&"object"==typeof style&&Object.assign(result,style)}return result}function getSheet(){return{id:sheet.id,textContent:sheet.getTextContent()}}function StyleSheet(styles,options){void 0===options&&(options={});var isRTL="rtl"===options.writingDirection,styleProps=customStyleq(styles,options);return Array.isArray(styleProps)&&null!=styleProps[1]&&(styleProps[1]=inline(styleProps[1],isRTL)),styleProps}StyleSheet.absoluteFill=absoluteFill,StyleSheet.absoluteFillObject=absoluteFillObject,StyleSheet.create=create,StyleSheet.compose=compose,StyleSheet.flatten=flatten,StyleSheet.getSheet=getSheet,StyleSheet.hairlineWidth=1,canUseDOM&&window.__REACT_DEVTOOLS_GLOBAL_HOOK__&&(window.__REACT_DEVTOOLS_GLOBAL_HOOK__.resolveRNStyle=StyleSheet.flatten);var stylesheet=StyleSheet;export default stylesheet;