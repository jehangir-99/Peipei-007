import invariant from"fbjs/lib/invariant";import*as React from"react";export default class StateSafePureComponent extends React.PureComponent{constructor(props){super(props),this._inAsyncStateUpdate=!1,this._installSetStateHooks()}setState(partialState,callback){"function"==typeof partialState?super.setState(((state,props)=>{var ret;this._inAsyncStateUpdate=!0;try{ret=partialState(state,props)}catch(err){throw err}finally{this._inAsyncStateUpdate=!1}return ret}),callback):super.setState(partialState,callback)}_installSetStateHooks(){var that=this,props=this.props,state=this.state;Object.defineProperty(this,"props",{get:()=>(invariant(!that._inAsyncStateUpdate,'"this.props" should not be accessed during state updates'),props),set(newProps){props=newProps}}),Object.defineProperty(this,"state",{get:()=>(invariant(!that._inAsyncStateUpdate,'"this.state" should not be acceessed during state updates'),state),set(newState){state=newState}})}}