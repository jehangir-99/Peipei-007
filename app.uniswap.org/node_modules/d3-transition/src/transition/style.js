import{interpolateTransformCss as interpolateTransform}from"d3-interpolate";import{style}from"d3-selection";import{set}from"./schedule.js";import{tweenValue}from"./tween.js";import interpolate from"./interpolate.js";function styleNull(name,interpolate){var string00,string10,interpolate0;return function(){var string0=style(this,name),string1=(this.style.removeProperty(name),style(this,name));return string0===string1?null:string0===string00&&string1===string10?interpolate0:interpolate0=interpolate(string00=string0,string10=string1)}}function styleRemove(name){return function(){this.style.removeProperty(name)}}function styleConstant(name,interpolate,value1){var string00,interpolate0,string1=value1+"";return function(){var string0=style(this,name);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate(string00=string0,value1)}}function styleFunction(name,interpolate,value){var string00,string10,interpolate0;return function(){var string0=style(this,name),value1=value(this),string1=value1+"";return null==value1&&(this.style.removeProperty(name),string1=value1=style(this,name)),string0===string1?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate(string00=string0,value1))}}function styleMaybeRemove(id,name){var on0,on1,listener0,remove,key="style."+name,event="end."+key;return function(){var schedule=set(this,id),on=schedule.on,listener=null==schedule.value[key]?remove||(remove=styleRemove(name)):void 0;on===on0&&listener0===listener||(on1=(on0=on).copy()).on(event,listener0=listener),schedule.on=on1}}export default function(name,value,priority){var i="transform"==(name+="")?interpolateTransform:interpolate;return null==value?this.styleTween(name,styleNull(name,i)).on("end.style."+name,styleRemove(name)):"function"==typeof value?this.styleTween(name,styleFunction(name,i,tweenValue(this,"style."+name,value))).each(styleMaybeRemove(this._id,name)):this.styleTween(name,styleConstant(name,i,value),priority).on("end.style."+name,null)}