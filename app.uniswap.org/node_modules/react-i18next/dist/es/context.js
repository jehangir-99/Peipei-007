import{createContext}from"react";import{getDefaults,setDefaults}from"./defaults.js";import{getI18n,setI18n}from"./i18nInstance.js";import{initReactI18next}from"./initReactI18next.js";export{getDefaults,setDefaults,getI18n,setI18n,initReactI18next};export const I18nContext=createContext();export class ReportNamespaces{constructor(){this.usedNamespaces={}}addUsedNamespaces(namespaces){namespaces.forEach((ns=>{this.usedNamespaces[ns]||(this.usedNamespaces[ns]=!0)}))}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}export function composeInitialProps(ForComponent){return ctx=>new Promise((resolve=>{const i18nInitialProps=getInitialProps();ForComponent.getInitialProps?ForComponent.getInitialProps(ctx).then((componentsInitialProps=>{resolve({...componentsInitialProps,...i18nInitialProps})})):resolve(i18nInitialProps)}))}export function getInitialProps(){const i18n=getI18n(),namespaces=i18n.reportNamespaces?i18n.reportNamespaces.getUsedNamespaces():[],ret={},initialI18nStore={};return i18n.languages.forEach((l=>{initialI18nStore[l]={},namespaces.forEach((ns=>{initialI18nStore[l][ns]=i18n.getResourceBundle(l,ns)||{}}))})),ret.initialI18nStore=initialI18nStore,ret.initialLanguage=i18n.language,ret}