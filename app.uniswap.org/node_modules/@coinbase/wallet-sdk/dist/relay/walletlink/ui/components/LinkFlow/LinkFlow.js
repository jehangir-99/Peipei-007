"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LinkFlow=void 0;const preact_1=require("preact"),ConnectDialog_1=require("../ConnectDialog/ConnectDialog");class LinkFlow{constructor(options){this.connected=!1,this.chainId=1,this.isOpen=!1,this.onCancel=null,this.root=null,this.connectDisabled=!1,this.darkMode=options.darkMode,this.version=options.version,this.sessionId=options.sessionId,this.sessionSecret=options.sessionSecret,this.linkAPIUrl=options.linkAPIUrl,this.isParentConnection=options.isParentConnection}attach(el){this.root=document.createElement("div"),this.root.className="-cbwsdk-link-flow-root",el.appendChild(this.root),this.render()}setConnected(v){this.connected!==v&&(this.connected=v,this.render())}setChainId(chainId){this.chainId!==chainId&&(this.chainId=chainId,this.render())}detach(){var _a;this.root&&((0,preact_1.render)(null,this.root),null===(_a=this.root.parentElement)||void 0===_a||_a.removeChild(this.root))}setConnectDisabled(connectDisabled){this.connectDisabled=connectDisabled}open(options){this.isOpen=!0,this.onCancel=options.onCancel,this.render()}close(){this.isOpen=!1,this.onCancel=null,this.render()}render(){this.root&&(0,preact_1.render)((0,preact_1.h)(ConnectDialog_1.ConnectDialog,{darkMode:this.darkMode,version:this.version,sessionId:this.sessionId,sessionSecret:this.sessionSecret,linkAPIUrl:this.linkAPIUrl,isOpen:this.isOpen,isConnected:this.connected,isParentConnection:this.isParentConnection,chainId:this.chainId,onCancel:this.onCancel,connectDisabled:this.connectDisabled}),this.root)}}exports.LinkFlow=LinkFlow;