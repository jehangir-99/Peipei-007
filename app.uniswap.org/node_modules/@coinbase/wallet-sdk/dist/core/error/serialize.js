"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.serializeError=void 0;const Web3Response_1=require("../../relay/walletlink/type/Web3Response"),version_1=require("../../version"),constants_1=require("./constants"),utils_1=require("./utils");function serializeError(error,requestOrMethod){const serialized=(0,utils_1.serialize)(getErrorObject(error),{shouldIncludeStack:!0}),docUrl=new URL("https://docs.cloud.coinbase.com/wallet-sdk/docs/errors");docUrl.searchParams.set("version",version_1.LIB_VERSION),docUrl.searchParams.set("code",serialized.code.toString());const method=getMethod(serialized.data,requestOrMethod);return method&&docUrl.searchParams.set("method",method),docUrl.searchParams.set("message",serialized.message),Object.assign(Object.assign({},serialized),{docUrl:docUrl.href})}function getErrorObject(error){return"string"==typeof error?{message:error,code:constants_1.standardErrorCodes.rpc.internal}:(0,Web3Response_1.isErrorResponse)(error)?Object.assign(Object.assign({},error),{message:error.errorMessage,code:error.errorCode,data:{method:error.method}}):error}function getMethod(serializedData,request){const methodInData=null==serializedData?void 0:serializedData.method;return methodInData||(void 0!==request?"string"==typeof request?request:Array.isArray(request)?request.length>0?request[0].method:void 0:request.method:void 0)}exports.serializeError=serializeError;