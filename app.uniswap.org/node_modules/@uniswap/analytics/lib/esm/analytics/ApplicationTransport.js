import{BaseTransport}from"@amplitude/analytics-core";export var OriginApplication;!function(OriginApplication){OriginApplication.DOCS="docs",OriginApplication.INFO="info",OriginApplication.INTERFACE="interface",OriginApplication.MOBILE="mobile-analytics-uniswap",OriginApplication.ORG="org"}(OriginApplication||(OriginApplication={}));export class ApplicationTransport extends BaseTransport{originApplication;reportOriginCountry;shouldReportOriginCountry=!0;constructor(originApplication,reportOriginCountry){if(super(),this.originApplication=originApplication,this.reportOriginCountry=reportOriginCountry,"undefined"==typeof fetch)throw new Error("FetchTransport is not supported")}async send(serverUrl,payload){const request={headers:{"x-origin-application":this.originApplication,"Content-Type":"application/json",Accept:"*/*"},keepalive:!0,body:JSON.stringify(payload),method:"POST"},response=await fetch(serverUrl,request),responseJSON=await response.json();return response.headers.has("Origin-Country")&&this.shouldReportOriginCountry&&(this.reportOriginCountry?.(response.headers.get("Origin-Country")),this.shouldReportOriginCountry=!1),this.buildResponse(responseJSON)}}