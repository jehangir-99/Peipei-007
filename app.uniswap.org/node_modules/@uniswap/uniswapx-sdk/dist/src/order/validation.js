"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.encodeExclusiveFillerData=exports.parseExclusiveFillerData=exports.parseValidation=exports.ValidationType=void 0;const ethers_1=require("ethers"),constants_1=require("../constants");var ValidationType;!function(ValidationType){ValidationType[ValidationType.None=0]="None",ValidationType[ValidationType.ExclusiveFiller=1]="ExclusiveFiller"}(ValidationType=exports.ValidationType||(exports.ValidationType={}));const NONE_VALIDATION={type:ValidationType.None,data:null};function parseValidation(info){const data=parseExclusiveFillerData(info.additionalValidationData);return data.type!==ValidationType.None?data:NONE_VALIDATION}function parseExclusiveFillerData(encoded){try{const[address,timestamp]=(new ethers_1.ethers.utils.AbiCoder).decode(["address","uint256"],encoded);return{type:ValidationType.ExclusiveFiller,data:{filler:address,lastExclusiveTimestamp:timestamp.toNumber()}}}catch(_a){return NONE_VALIDATION}}function encodeExclusiveFillerData(fillerAddress,lastExclusiveTimestamp,chainId,additionalValidationContractAddress){let additionalValidationContract="";if(additionalValidationContractAddress)additionalValidationContract=additionalValidationContractAddress;else{if(!chainId)throw new Error("No validation contract provided");additionalValidationContract=constants_1.EXCLUSIVE_FILLER_VALIDATION_MAPPING[chainId]}return{additionalValidationContract:additionalValidationContract,additionalValidationData:(new ethers_1.ethers.utils.AbiCoder).encode(["address","uint256"],[fillerAddress,lastExclusiveTimestamp])}}exports.parseValidation=parseValidation,exports.parseExclusiveFillerData=parseExclusiveFillerData,exports.encodeExclusiveFillerData=encodeExclusiveFillerData;