import{WeakCache,StrongCache}from"@wry/caches";var scheduledCleanup=new WeakSet;function schedule(cache){cache.size<=(cache.max||-1)||scheduledCleanup.has(cache)||(scheduledCleanup.add(cache),setTimeout((function(){cache.clean(),scheduledCleanup.delete(cache)}),100))}export var AutoCleanedWeakCache=function(max,dispose){var cache=new WeakCache(max,dispose);return cache.set=function(key,value){var ret=WeakCache.prototype.set.call(this,key,value);return schedule(this),ret},cache};export var AutoCleanedStrongCache=function(max,dispose){var cache=new StrongCache(max,dispose);return cache.set=function(key,value){var ret=StrongCache.prototype.set.call(this,key,value);return schedule(this),ret},cache};