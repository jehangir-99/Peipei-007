import{invariant,newInvariantError}from"../globals/index.js";import{valueToObjectRepresentation}from"./storeUtils.js";export function checkDocument(doc){invariant(doc&&"Document"===doc.kind,75);var operations=doc.definitions.filter((function(d){return"FragmentDefinition"!==d.kind})).map((function(definition){if("OperationDefinition"!==definition.kind)throw newInvariantError(76,definition.kind);return definition}));return invariant(operations.length<=1,77,operations.length),doc}export function getOperationDefinition(doc){return checkDocument(doc),doc.definitions.filter((function(definition){return"OperationDefinition"===definition.kind}))[0]}export function getOperationName(doc){return doc.definitions.filter((function(definition){return"OperationDefinition"===definition.kind&&!!definition.name})).map((function(x){return x.name.value}))[0]||null}export function getFragmentDefinitions(doc){return doc.definitions.filter((function(definition){return"FragmentDefinition"===definition.kind}))}export function getQueryDefinition(doc){var queryDef=getOperationDefinition(doc);return invariant(queryDef&&"query"===queryDef.operation,78),queryDef}export function getFragmentDefinition(doc){invariant("Document"===doc.kind,79),invariant(doc.definitions.length<=1,80);var fragmentDef=doc.definitions[0];return invariant("FragmentDefinition"===fragmentDef.kind,81),fragmentDef}export function getMainDefinition(queryDoc){var fragmentDefinition;checkDocument(queryDoc);for(var _i=0,_a=queryDoc.definitions;_i<_a.length;_i++){var definition=_a[_i];if("OperationDefinition"===definition.kind){var operation=definition.operation;if("query"===operation||"mutation"===operation||"subscription"===operation)return definition}"FragmentDefinition"!==definition.kind||fragmentDefinition||(fragmentDefinition=definition)}if(fragmentDefinition)return fragmentDefinition;throw newInvariantError(82)}export function getDefaultValues(definition){var defaultValues=Object.create(null),defs=definition&&definition.variableDefinitions;return defs&&defs.length&&defs.forEach((function(def){def.defaultValue&&valueToObjectRepresentation(defaultValues,def.variable.name,def.defaultValue)})),defaultValues}