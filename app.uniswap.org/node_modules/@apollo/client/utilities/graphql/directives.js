import{invariant}from"../globals/index.js";import{visit,BREAK}from"graphql";export function shouldInclude(_a,variables){var directives=_a.directives;return!directives||!directives.length||getInclusionDirectives(directives).every((function(_a){var directive=_a.directive,ifArgument=_a.ifArgument,evaledValue=!1;return"Variable"===ifArgument.value.kind?(evaledValue=variables&&variables[ifArgument.value.name.value],invariant(void 0!==evaledValue,68,directive.name.value)):evaledValue=ifArgument.value.value,"skip"===directive.name.value?!evaledValue:evaledValue}))}export function getDirectiveNames(root){var names=[];return visit(root,{Directive:function(node){names.push(node.name.value)}}),names}export var hasAnyDirectives=function(names,root){return hasDirectives(names,root,!1)};export var hasAllDirectives=function(names,root){return hasDirectives(names,root,!0)};export function hasDirectives(names,root,all){var nameSet=new Set(names),uniqueCount=nameSet.size;return visit(root,{Directive:function(node){if(nameSet.delete(node.name.value)&&(!all||!nameSet.size))return BREAK}}),all?!nameSet.size:nameSet.size<uniqueCount}export function hasClientExports(document){return document&&hasDirectives(["client","export"],document,!0)}function isInclusionDirective(_a){var value=_a.name.value;return"skip"===value||"include"===value}export function getInclusionDirectives(directives){var result=[];return directives&&directives.length&&directives.forEach((function(directive){if(isInclusionDirective(directive)){var directiveArguments=directive.arguments,directiveName=directive.name.value;invariant(directiveArguments&&1===directiveArguments.length,69,directiveName);var ifArgument=directiveArguments[0];invariant(ifArgument.name&&"if"===ifArgument.name.value,70,directiveName);var ifValue=ifArgument.value;invariant(ifValue&&("Variable"===ifValue.kind||"BooleanValue"===ifValue.kind),71,directiveName),result.push({directive:directive,ifArgument:ifArgument})}})),result}