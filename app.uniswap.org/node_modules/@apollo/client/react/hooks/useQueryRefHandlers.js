import*as React from"rehackt";import{assertWrappedQueryRef,getWrappedPromise,unwrapQueryRef,updateWrappedQueryRef,wrapQueryRef}from"../internal/index.js";import{useApolloClient}from"./useApolloClient.js";import{wrapHook}from"./internal/index.js";export function useQueryRefHandlers(queryRef){var unwrapped=unwrapQueryRef(queryRef);return wrapHook("useQueryRefHandlers",_useQueryRefHandlers,unwrapped?unwrapped.observable:useApolloClient())(queryRef)}function _useQueryRefHandlers(queryRef){assertWrappedQueryRef(queryRef);var _a=React.useState(queryRef),previousQueryRef=_a[0],setPreviousQueryRef=_a[1],_b=React.useState(queryRef),wrappedQueryRef=_b[0],setWrappedQueryRef=_b[1],internalQueryRef=unwrapQueryRef(queryRef);return previousQueryRef!==queryRef?(setPreviousQueryRef(queryRef),setWrappedQueryRef(queryRef)):updateWrappedQueryRef(queryRef,getWrappedPromise(wrappedQueryRef)),{refetch:React.useCallback((function(variables){var promise=internalQueryRef.refetch(variables);return setWrappedQueryRef(wrapQueryRef(internalQueryRef)),promise}),[internalQueryRef]),fetchMore:React.useCallback((function(options){var promise=internalQueryRef.fetchMore(options);return setWrappedQueryRef(wrapQueryRef(internalQueryRef)),promise}),[internalQueryRef])}}