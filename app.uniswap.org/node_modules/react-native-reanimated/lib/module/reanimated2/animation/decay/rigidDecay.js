"use strict";import{SLOPE_FACTOR,VELOCITY_EPS}from"./utils";export function rigidDecay(animation,now,config){const{lastTimestamp:lastTimestamp,startTimestamp:startTimestamp,initialVelocity:initialVelocity,current:current,velocity:velocity}=animation,deltaTime=Math.min(now-lastTimestamp,64),v=velocity*Math.exp(-(1-config.deceleration)*(now-startTimestamp)*SLOPE_FACTOR);if(animation.current=current+v*config.velocityFactor*deltaTime/1e3,animation.velocity=v,animation.lastTimestamp=now,config.clamp){if(initialVelocity<0&&animation.current<=config.clamp[0])return animation.current=config.clamp[0],!0;if(initialVelocity>0&&animation.current>=config.clamp[1])return animation.current=config.clamp[1],!0}return Math.abs(v)<VELOCITY_EPS}