"use strict";import{useEffect}from"react";import{startMapper,stopMapper}from"../core";import{useSharedValue}from"./useSharedValue";import{shouldBeUseWeb}from"../PlatformChecker";export function useAnimatedReaction(prepare,react,dependencies){const previous=useSharedValue(null);let inputs=Object.values(prepare.__closure??{});var _dependencies;shouldBeUseWeb()&&(!inputs.length&&null!==(_dependencies=dependencies)&&void 0!==_dependencies&&_dependencies.length&&(inputs=dependencies));void 0===dependencies?dependencies=[...Object.values(prepare.__closure??{}),...Object.values(react.__closure??{}),prepare.__workletHash,react.__workletHash]:dependencies.push(prepare.__workletHash,react.__workletHash),useEffect((()=>{const mapperId=startMapper((()=>{const input=prepare();react(input,previous.value),previous.value=input}),inputs);return()=>{stopMapper(mapperId)}}),dependencies)}