"use strict";import{useEffect,useRef}from"react";import{isWeb,isJest}from"../PlatformChecker";import{areDependenciesEqual,buildDependencies}from"./utils";import{makeShareable}from"../shareables";export function useHandler(handlers,dependencies){const initRef=useRef(null);if(null===initRef.current){const context=makeShareable({});initRef.current={context:context,savedDependencies:[]}}useEffect((()=>()=>{initRef.current=null}),[]);const{context:context,savedDependencies:savedDependencies}=initRef.current;dependencies=buildDependencies(dependencies,handlers);const doDependenciesDiffer=!areDependenciesEqual(dependencies,savedDependencies);initRef.current.savedDependencies=dependencies;return{context:context,doDependenciesDiffer:doDependenciesDiffer,useWeb:isWeb()||isJest()}}