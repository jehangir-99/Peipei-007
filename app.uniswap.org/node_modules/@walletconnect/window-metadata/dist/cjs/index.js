"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getWindowMetadata=void 0;const window_getters_1=require("@walletconnect/window-getters");function getWindowMetadata(){let doc,loc;try{doc=window_getters_1.getDocumentOrThrow(),loc=window_getters_1.getLocationOrThrow()}catch(e){return null}function getWindowMetadataOfAny(...args){const metaTags=doc.getElementsByTagName("meta");for(let i=0;i<metaTags.length;i++){const tag=metaTags[i],attributes=["itemprop","property","name"].map((target=>tag.getAttribute(target))).filter((attr=>!!attr&&args.includes(attr)));if(attributes.length&&attributes){const content=tag.getAttribute("content");if(content)return content}}return""}const name=function(){let name=getWindowMetadataOfAny("name","og:site_name","og:title","twitter:title");return name||(name=doc.title),name}();return{description:getWindowMetadataOfAny("description","og:description","twitter:description","keywords"),url:loc.origin,icons:function(){const links=doc.getElementsByTagName("link"),icons=[];for(let i=0;i<links.length;i++){const link=links[i],rel=link.getAttribute("rel");if(rel&&rel.toLowerCase().indexOf("icon")>-1){const href=link.getAttribute("href");if(href)if(-1===href.toLowerCase().indexOf("https:")&&-1===href.toLowerCase().indexOf("http:")&&0!==href.indexOf("//")){let absoluteHref=loc.protocol+"//"+loc.host;if(0===href.indexOf("/"))absoluteHref+=href;else{const path=loc.pathname.split("/");path.pop();absoluteHref+=path.join("/")+"/"+href}icons.push(absoluteHref)}else if(0===href.indexOf("//")){const absoluteUrl=loc.protocol+href;icons.push(absoluteUrl)}else icons.push(href)}}return icons}(),name:name}}exports.getWindowMetadata=getWindowMetadata;