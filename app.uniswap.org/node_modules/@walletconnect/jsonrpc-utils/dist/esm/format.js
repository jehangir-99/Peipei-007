import{getError,getErrorByCode,isReservedErrorCode}from"./error";import{INTERNAL_ERROR,SERVER_ERROR}from"./constants";export function payloadId(entropy=3){return Date.now()*Math.pow(10,entropy)+Math.floor(Math.random()*Math.pow(10,entropy))}export function getBigIntRpcId(entropy=6){return BigInt(payloadId(entropy))}export function formatJsonRpcRequest(method,params,id){return{id:id||payloadId(),jsonrpc:"2.0",method:method,params:params}}export function formatJsonRpcResult(id,result){return{id:id,jsonrpc:"2.0",result:result}}export function formatJsonRpcError(id,error,data){return{id:id,jsonrpc:"2.0",error:formatErrorMessage(error,data)}}export function formatErrorMessage(error,data){return void 0===error?getError(INTERNAL_ERROR):("string"==typeof error&&(error=Object.assign(Object.assign({},getError(SERVER_ERROR)),{message:error})),void 0!==data&&(error.data=data),isReservedErrorCode(error.code)&&(error=getErrorByCode(error.code)),error)}