import{invariant}from"hey-listen";import{animateStyle}from"./animate-style.es.js";import{getOptions}from"./utils/options.es.js";import{resolveElements}from"../utils/resolve-elements.es.js";import{withControls}from"./utils/controls.es.js";import{resolveOption}from"../utils/stagger.es.js";function createAnimate(AnimatePolyfill){return function(elements,keyframes,options={}){const numElements=(elements=resolveElements(elements)).length;invariant(Boolean(numElements),"No valid element provided."),invariant(Boolean(keyframes),"No keyframes defined.");const animationFactories=[];for(let i=0;i<numElements;i++){const element=elements[i];for(const key in keyframes){const valueOptions=getOptions(options,key);valueOptions.delay=resolveOption(valueOptions.delay,i,numElements);const animation=animateStyle(element,key,keyframes[key],valueOptions,AnimatePolyfill);animationFactories.push(animation)}}return withControls(animationFactories,options,options.duration)}}export{createAnimate};