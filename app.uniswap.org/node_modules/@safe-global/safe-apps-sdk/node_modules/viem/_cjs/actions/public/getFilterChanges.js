"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFilterChanges=void 0;const abi_js_1=require("../../errors/abi.js"),decodeEventLog_js_1=require("../../utils/abi/decodeEventLog.js"),log_js_1=require("../../utils/formatters/log.js");async function getFilterChanges(_client,{filter:filter}){const strict="strict"in filter&&filter.strict;return(await filter.request({method:"eth_getFilterChanges",params:[filter.id]})).map((log=>{if("string"==typeof log)return log;try{const{eventName:eventName,args:args}="abi"in filter&&filter.abi?(0,decodeEventLog_js_1.decodeEventLog)({abi:filter.abi,data:log.data,topics:log.topics,strict:strict}):{eventName:void 0,args:void 0};return(0,log_js_1.formatLog)(log,{args:args,eventName:eventName})}catch(err){let eventName,isUnnamed;if(err instanceof abi_js_1.DecodeLogDataMismatch||err instanceof abi_js_1.DecodeLogTopicsMismatch){if("strict"in filter&&filter.strict)return;eventName=err.abiItem.name,isUnnamed=err.abiItem.inputs?.some((x=>!("name"in x&&x.name)))}return(0,log_js_1.formatLog)(log,{args:isUnnamed?[]:{},eventName:eventName})}})).filter(Boolean)}exports.getFilterChanges=getFilterChanges;