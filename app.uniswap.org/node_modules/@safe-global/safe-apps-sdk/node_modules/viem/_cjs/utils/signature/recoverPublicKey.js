"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.recoverPublicKey=void 0;const isHex_js_1=require("../data/isHex.js"),fromHex_js_1=require("../encoding/fromHex.js"),toHex_js_1=require("../encoding/toHex.js");async function recoverPublicKey({hash:hash,signature:signature}){const signatureHex=(0,isHex_js_1.isHex)(signature)?signature:(0,toHex_js_1.toHex)(signature),hashHex=(0,isHex_js_1.isHex)(hash)?hash:(0,toHex_js_1.toHex)(hash);let v=(0,fromHex_js_1.hexToNumber)(`0x${signatureHex.slice(130)}`);0!==v&&1!==v||(v+=27);const{secp256k1:secp256k1}=await Promise.resolve().then((()=>require("@noble/curves/secp256k1")));return`0x${secp256k1.Signature.fromCompact(signatureHex.substring(2,130)).addRecoveryBit(v-27).recoverPublicKey(hashHex.substring(2)).toHex(!1)}`}exports.recoverPublicKey=recoverPublicKey;