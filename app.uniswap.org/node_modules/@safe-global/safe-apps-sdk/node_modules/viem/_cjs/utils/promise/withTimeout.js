"use strict";function withTimeout(fn,{errorInstance:errorInstance=new Error("timed out"),timeout:timeout,signal:signal}){return new Promise(((resolve,reject)=>{(async()=>{let timeoutId;try{const controller=new AbortController;timeout>0&&(timeoutId=setTimeout((()=>{signal?controller.abort():reject(errorInstance)}),timeout)),resolve(await fn({signal:controller?.signal}))}catch(err){"AbortError"===err.name&&reject(errorInstance),reject(err)}finally{clearTimeout(timeoutId)}})()}))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.withTimeout=void 0,exports.withTimeout=withTimeout;