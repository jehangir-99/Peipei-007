"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getCreate2Address=exports.getCreateAddress=exports.getContractAddress=void 0;const concat_js_1=require("../data/concat.js"),isBytes_js_1=require("../data/isBytes.js"),pad_js_1=require("../data/pad.js"),slice_js_1=require("../data/slice.js"),toBytes_js_1=require("../encoding/toBytes.js"),toRlp_js_1=require("../encoding/toRlp.js"),keccak256_js_1=require("../hash/keccak256.js"),getAddress_js_1=require("./getAddress.js");function getContractAddress(opts){return"CREATE2"===opts.opcode?getCreate2Address(opts):getCreateAddress(opts)}function getCreateAddress(opts){const from=(0,toBytes_js_1.toBytes)((0,getAddress_js_1.getAddress)(opts.from));let nonce=(0,toBytes_js_1.toBytes)(opts.nonce);return 0===nonce[0]&&(nonce=new Uint8Array([])),(0,getAddress_js_1.getAddress)(`0x${(0,keccak256_js_1.keccak256)((0,toRlp_js_1.toRlp)([from,nonce],"bytes")).slice(26)}`)}function getCreate2Address(opts){const from=(0,toBytes_js_1.toBytes)((0,getAddress_js_1.getAddress)(opts.from)),salt=(0,pad_js_1.pad)((0,isBytes_js_1.isBytes)(opts.salt)?opts.salt:(0,toBytes_js_1.toBytes)(opts.salt),{size:32}),bytecodeHash="bytecodeHash"in opts?(0,isBytes_js_1.isBytes)(opts.bytecodeHash)?opts.bytecodeHash:(0,toBytes_js_1.toBytes)(opts.bytecodeHash):(0,keccak256_js_1.keccak256)(opts.bytecode,"bytes");return(0,getAddress_js_1.getAddress)((0,slice_js_1.slice)((0,keccak256_js_1.keccak256)((0,concat_js_1.concat)([(0,toBytes_js_1.toBytes)("0xff"),from,salt,bytecodeHash])),12))}exports.getContractAddress=getContractAddress,exports.getCreateAddress=getCreateAddress,exports.getCreate2Address=getCreate2Address;