"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defineTransaction=exports.formatTransaction=exports.transactionType=void 0;const fromHex_js_1=require("../encoding/fromHex.js"),formatter_js_1=require("./formatter.js");function formatTransaction(transaction){const transaction_={...transaction,blockHash:transaction.blockHash?transaction.blockHash:null,blockNumber:transaction.blockNumber?BigInt(transaction.blockNumber):null,chainId:transaction.chainId?(0,fromHex_js_1.hexToNumber)(transaction.chainId):void 0,gas:transaction.gas?BigInt(transaction.gas):void 0,gasPrice:transaction.gasPrice?BigInt(transaction.gasPrice):void 0,maxFeePerGas:transaction.maxFeePerGas?BigInt(transaction.maxFeePerGas):void 0,maxPriorityFeePerGas:transaction.maxPriorityFeePerGas?BigInt(transaction.maxPriorityFeePerGas):void 0,nonce:transaction.nonce?(0,fromHex_js_1.hexToNumber)(transaction.nonce):void 0,to:transaction.to?transaction.to:null,transactionIndex:transaction.transactionIndex?Number(transaction.transactionIndex):null,type:transaction.type?exports.transactionType[transaction.type]:void 0,typeHex:transaction.type?transaction.type:void 0,value:transaction.value?BigInt(transaction.value):void 0,v:transaction.v?BigInt(transaction.v):void 0};return transaction_.yParity=(()=>{if(transaction.yParity)return Number(transaction.yParity);if("bigint"==typeof transaction_.v){if(0n===transaction_.v||27n===transaction_.v)return 0;if(1n===transaction_.v||28n===transaction_.v)return 1;if(transaction_.v>=35n)return transaction_.v%2n===0n?1:0}})(),"legacy"===transaction_.type&&(delete transaction_.accessList,delete transaction_.maxFeePerGas,delete transaction_.maxPriorityFeePerGas,delete transaction_.yParity),"eip2930"===transaction_.type&&(delete transaction_.maxFeePerGas,delete transaction_.maxPriorityFeePerGas),transaction_}exports.transactionType={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559"},exports.formatTransaction=formatTransaction,exports.defineTransaction=(0,formatter_js_1.defineFormatter)("transaction",formatTransaction);