"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Wallet=void 0;const methods_1=require("../communication/methods"),permissions_1=require("../types/permissions");class Wallet{constructor(communicator){this.communicator=communicator}async getPermissions(){return(await this.communicator.send(methods_1.Methods.wallet_getPermissions,void 0)).data}async requestPermissions(permissions){if(!this.isPermissionRequestValid(permissions))throw new permissions_1.PermissionsError("Permissions request is invalid",permissions_1.PERMISSIONS_REQUEST_REJECTED);try{return(await this.communicator.send(methods_1.Methods.wallet_requestPermissions,permissions)).data}catch(_a){throw new permissions_1.PermissionsError("Permissions rejected",permissions_1.PERMISSIONS_REQUEST_REJECTED)}}isPermissionRequestValid(permissions){return permissions.every((pr=>"object"==typeof pr&&Object.keys(pr).every((method=>!!Object.values(methods_1.RestrictedMethods).includes(method)))))}}exports.Wallet=Wallet;