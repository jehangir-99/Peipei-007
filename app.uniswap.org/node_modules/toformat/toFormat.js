function toFormat(Ctor){"use strict";return Ctor.prototype.toFormat=function(dp,rm,fmt){if(!this.e&&0!==this.e)return this.toString();var arr,g1,g2,i,u,nd,intd,intp,fracp,dsep,gsep,gsize,sgsize,fgsep,fgsize,tfmt=this.format||{},cfmt=this.constructor.format||{};if(dp!=u?"object"==typeof dp?(fmt=dp,dp=u):rm!=u?"object"==typeof rm?(fmt=rm,rm=u):"object"!=typeof fmt&&(fmt={}):fmt={}:fmt={},intp=(arr=this.toFixed(dp,rm).split("."))[0],fracp=arr[1],nd=(intd=this.s<0?intp.slice(1):intp).length,(dsep=fmt.decimalSeparator)==u&&(dsep=tfmt.decimalSeparator)==u&&(dsep=cfmt.decimalSeparator)==u&&(dsep="."),(gsep=fmt.groupSeparator)==u&&(gsep=tfmt.groupSeparator)==u&&(gsep=cfmt.groupSeparator),gsep&&((gsize=fmt.groupSize)==u&&(gsize=tfmt.groupSize)==u&&(gsize=cfmt.groupSize)==u&&(gsize=0),(sgsize=fmt.secondaryGroupSize)==u&&(sgsize=tfmt.secondaryGroupSize)==u&&(sgsize=cfmt.secondaryGroupSize)==u&&(sgsize=0),sgsize?(g1=+sgsize,nd-=g2=+gsize):(g1=+gsize,g2=+sgsize),g1>0&&nd>0)){for(i=nd%g1||g1,intp=intd.substr(0,i);i<nd;i+=g1)intp+=gsep+intd.substr(i,g1);g2>0&&(intp+=gsep+intd.slice(i)),this.s<0&&(intp="-"+intp)}return fracp?((fgsep=fmt.fractionGroupSeparator)==u&&(fgsep=tfmt.fractionGroupSeparator)==u&&(fgsep=cfmt.fractionGroupSeparator),fgsep&&((fgsize=fmt.fractionGroupSize)==u&&(fgsize=tfmt.fractionGroupSize)==u&&(fgsize=cfmt.fractionGroupSize)==u&&(fgsize=0),(fgsize=+fgsize)&&(fracp=fracp.replace(new RegExp("\\d{"+fgsize+"}\\B","g"),"$&"+fgsep))),intp+dsep+fracp):intp},Ctor.format={decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:"",fractionGroupSize:0},Ctor}"undefined"!=typeof module&&module.exports&&(module.exports=toFormat);