"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ImageBase=void 0;var ImageBase=function(){function ImageBase(){}return ImageBase.prototype.scaleDown=function(opts){var width=this.getWidth(),height=this.getHeight(),ratio=1;if(opts.maxDimension>0){var maxSide=Math.max(width,height);maxSide>opts.maxDimension&&(ratio=opts.maxDimension/maxSide)}else ratio=1/opts.quality;ratio<1&&this.resize(width*ratio,height*ratio,ratio)},ImageBase.prototype.applyFilter=function(filter){var imageData=this.getImageData();if("function"==typeof filter)for(var pixels=imageData.data,n=pixels.length/4,offset=void 0,i=0;i<n;i++)filter(pixels[(offset=4*i)+0],pixels[offset+1],pixels[offset+2],pixels[offset+3])||(pixels[offset+3]=0);return Promise.resolve(imageData)},ImageBase}();exports.ImageBase=ImageBase;