import{noop}from"../utils/functionUtils";export function jsonStringify(value,replacer,space){if("object"!=typeof value||null===value)return JSON.stringify(value);var restoreObjectPrototypeToJson=detachToJsonMethod(Object.prototype),restoreArrayPrototypeToJson=detachToJsonMethod(Array.prototype),restoreValuePrototypeToJson=detachToJsonMethod(Object.getPrototypeOf(value)),restoreValueToJson=detachToJsonMethod(value);try{return JSON.stringify(value,replacer,space)}catch(_a){return"<error: unable to serialize object>"}finally{restoreObjectPrototypeToJson(),restoreArrayPrototypeToJson(),restoreValuePrototypeToJson(),restoreValueToJson()}}export function detachToJsonMethod(value){var object=value,objectToJson=object.toJSON;return objectToJson?(delete object.toJSON,function(){object.toJSON=objectToJson}):noop}