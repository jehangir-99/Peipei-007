import{callMonitored}from"../monitor";import{noop}from"../utils/functionUtils";import{computeStackTrace}from"./computeStackTrace";export function createHandlingStack(){var formattedStack,error=new Error;if(!error.stack)try{throw error}catch(e){noop()}return callMonitored((function(){var stackTrace=computeStackTrace(error);stackTrace.stack=stackTrace.stack.slice(2),formattedStack=toStackTraceString(stackTrace)})),formattedStack}export function toStackTraceString(stack){var result=formatErrorMessage(stack);return stack.stack.forEach((function(frame){var func="?"===frame.func?"<anonymous>":frame.func,args=frame.args&&frame.args.length>0?"(".concat(frame.args.join(", "),")"):"",line=frame.line?":".concat(frame.line):"",column=frame.line&&frame.column?":".concat(frame.column):"";result+="\n  at ".concat(func).concat(args," @ ").concat(frame.url).concat(line).concat(column)})),result}export function formatErrorMessage(stack){return"".concat(stack.name||"Error",": ").concat(stack.message)}