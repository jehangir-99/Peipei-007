import{getInitCookie}from"../../browser/cookie";import{SESSION_STORE_KEY}from"./storeStrategies/sessionStoreStrategy";import{expandSessionState,isSessionStarted}from"./sessionState";export var OLD_SESSION_COOKIE_NAME="_dd";export var OLD_RUM_COOKIE_NAME="_dd_r";export var OLD_LOGS_COOKIE_NAME="_dd_l";export var RUM_SESSION_KEY="rum";export var LOGS_SESSION_KEY="logs";export function tryOldCookiesMigration(cookieStoreStrategy){if(!getInitCookie(SESSION_STORE_KEY)){var oldSessionId=getInitCookie(OLD_SESSION_COOKIE_NAME),oldRumType=getInitCookie(OLD_RUM_COOKIE_NAME),oldLogsType=getInitCookie(OLD_LOGS_COOKIE_NAME),session={};oldSessionId&&(session.id=oldSessionId),oldLogsType&&/^[01]$/.test(oldLogsType)&&(session[LOGS_SESSION_KEY]=oldLogsType),oldRumType&&/^[012]$/.test(oldRumType)&&(session[RUM_SESSION_KEY]=oldRumType),isSessionStarted(session)&&(expandSessionState(session),cookieStoreStrategy.persistSession(session))}}