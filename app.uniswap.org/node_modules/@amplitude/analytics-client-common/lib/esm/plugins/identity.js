import{__awaiter,__generator}from"tslib";import{PluginType}from"@amplitude/analytics-types";import{getAnalyticsConnector}from"../analytics-connector";var IdentityEventSender=function(){function IdentityEventSender(){this.name="identity",this.type=PluginType.BEFORE,this.identityStore=getAnalyticsConnector().identityStore}return IdentityEventSender.prototype.execute=function(context){return __awaiter(this,void 0,void 0,(function(){var userProperties;return __generator(this,(function(_a){return(userProperties=context.user_properties)&&this.identityStore.editIdentity().updateUserProperties(userProperties).commit(),[2,context]}))}))},IdentityEventSender.prototype.setup=function(config){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_a){return config.instanceName&&(this.identityStore=getAnalyticsConnector(config.instanceName).identityStore),[2]}))}))},IdentityEventSender}();export{IdentityEventSender};