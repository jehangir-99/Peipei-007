import{__awaiter,__extends,__generator}from"tslib";import{BaseTransport}from"@amplitude/analytics-core";var FetchTransport=function(_super){function FetchTransport(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(FetchTransport,_super),FetchTransport.prototype.send=function(serverUrl,payload){return __awaiter(this,void 0,void 0,(function(){var options,responsePayload;return __generator(this,(function(_a){switch(_a.label){case 0:if("undefined"==typeof fetch)throw new Error("FetchTransport is not supported");return options={headers:{"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify(payload),method:"POST"},[4,fetch(serverUrl,options)];case 1:return[4,_a.sent().json()];case 2:return responsePayload=_a.sent(),[2,this.buildResponse(responsePayload)]}}))}))},FetchTransport}(BaseTransport);export{FetchTransport};