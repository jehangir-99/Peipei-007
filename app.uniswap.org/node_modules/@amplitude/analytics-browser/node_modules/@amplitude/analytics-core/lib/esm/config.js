import{LogLevel,ServerZone}from"@amplitude/analytics-types";import{AMPLITUDE_SERVER_URL,AMPLITUDE_BATCH_SERVER_URL,EU_AMPLITUDE_SERVER_URL,EU_AMPLITUDE_BATCH_SERVER_URL}from"./constants";import{Logger}from"./logger";export var getDefaultConfig=function(){return{flushMaxRetries:12,flushQueueSize:200,flushIntervalMillis:1e4,instanceName:"$default_instance",logLevel:LogLevel.Warn,loggerProvider:new Logger,optOut:!1,serverUrl:AMPLITUDE_SERVER_URL,serverZone:ServerZone.US,useBatch:!1}};var Config=function(){function Config(options){var _a,_b,_c,_d;this._optOut=!1;var defaultConfig=getDefaultConfig();this.apiKey=options.apiKey,this.flushIntervalMillis=null!==(_a=options.flushIntervalMillis)&&void 0!==_a?_a:defaultConfig.flushIntervalMillis,this.flushMaxRetries=options.flushMaxRetries||defaultConfig.flushMaxRetries,this.flushQueueSize=options.flushQueueSize||defaultConfig.flushQueueSize,this.instanceName=options.instanceName||defaultConfig.instanceName,this.loggerProvider=options.loggerProvider||defaultConfig.loggerProvider,this.logLevel=null!==(_b=options.logLevel)&&void 0!==_b?_b:defaultConfig.logLevel,this.minIdLength=options.minIdLength,this.plan=options.plan,this.ingestionMetadata=options.ingestionMetadata,this.optOut=null!==(_c=options.optOut)&&void 0!==_c?_c:defaultConfig.optOut,this.serverUrl=options.serverUrl,this.serverZone=options.serverZone||defaultConfig.serverZone,this.storageProvider=options.storageProvider,this.transportProvider=options.transportProvider,this.useBatch=null!==(_d=options.useBatch)&&void 0!==_d?_d:defaultConfig.useBatch,this.loggerProvider.enable(this.logLevel);var serverConfig=createServerConfig(options.serverUrl,options.serverZone,options.useBatch);this.serverZone=serverConfig.serverZone,this.serverUrl=serverConfig.serverUrl}return Object.defineProperty(Config.prototype,"optOut",{get:function(){return this._optOut},set:function(optOut){this._optOut=optOut},enumerable:!1,configurable:!0}),Config}();export{Config};export var getServerUrl=function(serverZone,useBatch){return serverZone===ServerZone.EU?useBatch?EU_AMPLITUDE_BATCH_SERVER_URL:EU_AMPLITUDE_SERVER_URL:useBatch?AMPLITUDE_BATCH_SERVER_URL:AMPLITUDE_SERVER_URL};export var createServerConfig=function(serverUrl,serverZone,useBatch){if(void 0===serverUrl&&(serverUrl=""),void 0===serverZone&&(serverZone=getDefaultConfig().serverZone),void 0===useBatch&&(useBatch=getDefaultConfig().useBatch),serverUrl)return{serverUrl:serverUrl,serverZone:void 0};var _serverZone=["US","EU"].includes(serverZone)?serverZone:getDefaultConfig().serverZone;return{serverZone:_serverZone,serverUrl:getServerUrl(_serverZone,useBatch)}};