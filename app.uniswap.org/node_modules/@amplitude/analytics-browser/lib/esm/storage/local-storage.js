import{__awaiter,__generator}from"tslib";import{getGlobalScope}from"@amplitude/analytics-client-common";var LocalStorage=function(){function LocalStorage(){}return LocalStorage.prototype.isEnabled=function(){return __awaiter(this,void 0,void 0,(function(){var random,testStorage,testKey;return __generator(this,(function(_b){switch(_b.label){case 0:if(!getGlobalScope())return[2,!1];random=String(Date.now()),testStorage=new LocalStorage,testKey="AMP_TEST",_b.label=1;case 1:return _b.trys.push([1,4,5,7]),[4,testStorage.set(testKey,random)];case 2:return _b.sent(),[4,testStorage.get(testKey)];case 3:return[2,_b.sent()===random];case 4:return _b.sent(),[2,!1];case 5:return[4,testStorage.remove(testKey)];case 6:return _b.sent(),[7];case 7:return[2]}}))}))},LocalStorage.prototype.get=function(key){return __awaiter(this,void 0,void 0,(function(){var value;return __generator(this,(function(_b){switch(_b.label){case 0:return _b.trys.push([0,2,,3]),[4,this.getRaw(key)];case 1:return(value=_b.sent())?[2,JSON.parse(value)]:[2,void 0];case 2:return _b.sent(),[2,void 0];case 3:return[2]}}))}))},LocalStorage.prototype.getRaw=function(key){var _a;return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_b){return[2,(null===(_a=getGlobalScope())||void 0===_a?void 0:_a.localStorage.getItem(key))||void 0]}))}))},LocalStorage.prototype.set=function(key,value){var _a;return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_b){try{null===(_a=getGlobalScope())||void 0===_a||_a.localStorage.setItem(key,JSON.stringify(value))}catch(_c){}return[2]}))}))},LocalStorage.prototype.remove=function(key){var _a;return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_b){try{null===(_a=getGlobalScope())||void 0===_a||_a.localStorage.removeItem(key)}catch(_c){}return[2]}))}))},LocalStorage.prototype.reset=function(){var _a;return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_b){try{null===(_a=getGlobalScope())||void 0===_a||_a.localStorage.clear()}catch(_c){}return[2]}))}))},LocalStorage}();export{LocalStorage};