import{solidityError,solidityPanic}from"../../constants/solidity.js";import{AbiDecodingZeroDataError,AbiErrorSignatureNotFoundError}from"../../errors/abi.js";import{slice}from"../data/slice.js";import{toFunctionSelector}from"../hash/toFunctionSelector.js";import{decodeAbiParameters}from"./decodeAbiParameters.js";import{formatAbiItem}from"./formatAbiItem.js";export function decodeErrorResult(parameters){const{abi:abi,data:data}=parameters,signature=slice(data,0,4);if("0x"===signature)throw new AbiDecodingZeroDataError;const abiItem=[...abi||[],solidityError,solidityPanic].find((x=>"error"===x.type&&signature===toFunctionSelector(formatAbiItem(x))));if(!abiItem)throw new AbiErrorSignatureNotFoundError(signature,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:abiItem,args:"inputs"in abiItem&&abiItem.inputs&&abiItem.inputs.length>0?decodeAbiParameters(abiItem.inputs,slice(data,4)):void 0,errorName:abiItem.name}}