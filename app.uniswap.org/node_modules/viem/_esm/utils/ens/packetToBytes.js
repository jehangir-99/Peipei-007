import{stringToBytes}from"../encoding/toBytes.js";import{encodeLabelhash}from"./encodeLabelhash.js";import{labelhash}from"./labelhash.js";export function packetToBytes(packet){const value=packet.replace(/^\.|\.$/gm,"");if(0===value.length)return new Uint8Array(1);const bytes=new Uint8Array(stringToBytes(value).byteLength+2);let offset=0;const list=value.split(".");for(let i=0;i<list.length;i++){let encoded=stringToBytes(list[i]);encoded.byteLength>255&&(encoded=stringToBytes(encodeLabelhash(labelhash(list[i])))),bytes[offset]=encoded.length,bytes.set(encoded,offset+1),offset+=encoded.length+1}return bytes.byteLength!==offset+1?bytes.slice(0,offset+1):bytes}