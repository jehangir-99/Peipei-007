import{getGlobalSingleton,SyncPromise,logger,isThenable}from"@sentry/utils";function getGlobalEventProcessors(){return getGlobalSingleton("globalEventProcessors",(()=>[]))}function addGlobalEventProcessor(callback){getGlobalEventProcessors().push(callback)}function notifyEventProcessors(processors,event,hint,index=0){return new SyncPromise(((resolve,reject)=>{const processor=processors[index];if(null===event||"function"!=typeof processor)resolve(event);else{const result=processor({...event},hint);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&processor.id&&null===result&&logger.log(`Event processor "${processor.id}" dropped event`),isThenable(result)?result.then((final=>notifyEventProcessors(processors,final,hint,index+1).then(resolve))).then(null,reject):notifyEventProcessors(processors,result,hint,index+1).then(resolve).then(null,reject)}}))}export{addGlobalEventProcessor,getGlobalEventProcessors,notifyEventProcessors};