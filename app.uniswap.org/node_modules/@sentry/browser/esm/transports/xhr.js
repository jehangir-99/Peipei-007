import{createTransport}from"@sentry/core";import{SyncPromise}from"@sentry/utils";const XHR_READYSTATE_DONE=4;function makeXHRTransport(options){return createTransport(options,(function(request){return new SyncPromise(((resolve,reject)=>{const xhr=new XMLHttpRequest;xhr.onerror=reject,xhr.onreadystatechange=()=>{4===xhr.readyState&&resolve({statusCode:xhr.status,headers:{"x-sentry-rate-limits":xhr.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":xhr.getResponseHeader("Retry-After")}})},xhr.open("POST",options.url);for(const header in options.headers)Object.prototype.hasOwnProperty.call(options.headers,header)&&xhr.setRequestHeader(header,options.headers[header]);xhr.send(request.body)}))}))}export{makeXHRTransport};