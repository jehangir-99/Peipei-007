import{isNativeFetch,logger}from"@sentry/utils";import{WINDOW}from"../helpers.js";let cachedFetchImpl;function getNativeFetchImplementation(){if(cachedFetchImpl)return cachedFetchImpl;if(isNativeFetch(WINDOW.fetch))return cachedFetchImpl=WINDOW.fetch.bind(WINDOW);const document=WINDOW.document;let fetchImpl=WINDOW.fetch;if(document&&"function"==typeof document.createElement)try{const sandbox=document.createElement("iframe");sandbox.hidden=!0,document.head.appendChild(sandbox);const contentWindow=sandbox.contentWindow;contentWindow&&contentWindow.fetch&&(fetchImpl=contentWindow.fetch),document.head.removeChild(sandbox)}catch(e){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return cachedFetchImpl=fetchImpl.bind(WINDOW)}function clearCachedFetchImplementation(){cachedFetchImpl=void 0}export{clearCachedFetchImplementation,getNativeFetchImplementation};