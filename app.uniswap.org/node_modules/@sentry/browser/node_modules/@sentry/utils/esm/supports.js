import{logger}from"./logger.js";import{getGlobalObject}from"./worldwide.js";const WINDOW=getGlobalObject();function supportsErrorEvent(){try{return new ErrorEvent(""),!0}catch(e){return!1}}function supportsDOMError(){try{return new DOMError(""),!0}catch(e){return!1}}function supportsDOMException(){try{return new DOMException(""),!0}catch(e){return!1}}function supportsFetch(){if(!("fetch"in WINDOW))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function isNativeFetch(func){return func&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(func.toString())}function supportsNativeFetch(){if(!supportsFetch())return!1;if(isNativeFetch(WINDOW.fetch))return!0;let result=!1;const doc=WINDOW.document;if(doc&&"function"==typeof doc.createElement)try{const sandbox=doc.createElement("iframe");sandbox.hidden=!0,doc.head.appendChild(sandbox),sandbox.contentWindow&&sandbox.contentWindow.fetch&&(result=isNativeFetch(sandbox.contentWindow.fetch)),doc.head.removeChild(sandbox)}catch(err){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",err)}return result}function supportsReportingObserver(){return"ReportingObserver"in WINDOW}function supportsReferrerPolicy(){if(!supportsFetch())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch(e){return!1}}export{isNativeFetch,supportsDOMError,supportsDOMException,supportsErrorEvent,supportsFetch,supportsNativeFetch,supportsReferrerPolicy,supportsReportingObserver};