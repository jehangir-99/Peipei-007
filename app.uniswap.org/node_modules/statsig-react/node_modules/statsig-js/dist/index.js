"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=this&&this.__generator||function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.StatsigAsyncStorage=exports.EvaluationReason=exports.StatsigClient=exports.Layer=exports.DynamicConfig=void 0;var Errors_1=require("./Errors"),StatsigClient_1=__importDefault(require("./StatsigClient")),StatsigRuntime_1=__importDefault(require("./StatsigRuntime")),Object_entries_1=__importDefault(require("./utils/Object.entries")),Object_fromEntries_1=__importDefault(require("./utils/Object.fromEntries")),Promise_finally_1=__importDefault(require("./utils/Promise.finally")),EvaluationReason_1=require("./utils/EvaluationReason"),DynamicConfig_1=require("./DynamicConfig");Object.defineProperty(exports,"DynamicConfig",{enumerable:!0,get:function(){return __importDefault(DynamicConfig_1).default}});var Layer_1=require("./Layer");Object.defineProperty(exports,"Layer",{enumerable:!0,get:function(){return __importDefault(Layer_1).default}});var StatsigClient_2=require("./StatsigClient");Object.defineProperty(exports,"StatsigClient",{enumerable:!0,get:function(){return __importDefault(StatsigClient_2).default}});var EvaluationReason_2=require("./utils/EvaluationReason");Object.defineProperty(exports,"EvaluationReason",{enumerable:!0,get:function(){return EvaluationReason_2.EvaluationReason}});var StatsigAsyncStorage_1=require("./utils/StatsigAsyncStorage");Object.defineProperty(exports,"StatsigAsyncStorage",{enumerable:!0,get:function(){return __importDefault(StatsigAsyncStorage_1).default}}),(0,Object_entries_1.default)(),(0,Object_fromEntries_1.default)(),(0,Promise_finally_1.default)();var Statsig=function(){function Statsig(){}return Object.defineProperty(Statsig,"encodeIntializeCall",{get:function(){return StatsigRuntime_1.default.encodeInitializeCall},set:function(value){StatsigRuntime_1.default.encodeInitializeCall=value},enumerable:!1,configurable:!0}),Statsig.initialize=function(sdkKey,user,options){var _a;return __awaiter(this,void 0,void 0,(function(){var inst;return __generator(this,(function(_b){return inst=null!==(_a=Statsig.instance)&&void 0!==_a?_a:new StatsigClient_1.default(sdkKey,user,options),Statsig.instance||(Statsig.instance=inst),[2,inst.initializeAsync()]}))}))},Statsig.prefetchUsers=function(users){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_a){switch(_a.label){case 0:return[4,Statsig.getClientX().prefetchUsers(users)];case 1:return[2,_a.sent()]}}))}))},Statsig.setInitializeValues=function(initializeValues){Statsig.getClientX().setInitializeValues(initializeValues)},Statsig.checkGate=function(gateName,ignoreOverrides){return void 0===ignoreOverrides&&(ignoreOverrides=!1),Statsig.getClientX().checkGate(gateName,ignoreOverrides)},Statsig.checkGateWithExposureLoggingDisabled=function(gateName,ignoreOverrides){return void 0===ignoreOverrides&&(ignoreOverrides=!1),Statsig.getClientX().checkGateWithExposureLoggingDisabled(gateName,ignoreOverrides)},Statsig.manuallyLogGateExposure=function(gateName){Statsig.getClientX().logGateExposure(gateName)},Statsig.getConfig=function(configName,ignoreOverrides){return void 0===ignoreOverrides&&(ignoreOverrides=!1),Statsig.getClientX().getConfig(configName,ignoreOverrides)},Statsig.getConfigWithExposureLoggingDisabled=function(configName,ignoreOverrides){return void 0===ignoreOverrides&&(ignoreOverrides=!1),Statsig.getClientX().getConfigWithExposureLoggingDisabled(configName,ignoreOverrides)},Statsig.manuallyLogConfigExposure=function(configName){Statsig.getClientX().logConfigExposure(configName)},Statsig.getExperiment=function(experimentName,keepDeviceValue,ignoreOverrides){return void 0===keepDeviceValue&&(keepDeviceValue=!1),void 0===ignoreOverrides&&(ignoreOverrides=!1),Statsig.getClientX().getExperiment(experimentName,keepDeviceValue,ignoreOverrides)},Statsig.getExperimentWithExposureLoggingDisabled=function(experimentName,keepDeviceValue,ignoreOverrides){return void 0===keepDeviceValue&&(keepDeviceValue=!1),void 0===ignoreOverrides&&(ignoreOverrides=!1),Statsig.getClientX().getExperimentWithExposureLoggingDisabled(experimentName,keepDeviceValue,ignoreOverrides)},Statsig.manuallyLogExperimentExposure=function(configName,keepDeviceValue){void 0===keepDeviceValue&&(keepDeviceValue=!1),Statsig.getClientX().logExperimentExposure(configName,keepDeviceValue)},Statsig.getLayer=function(layerName,keepDeviceValue){return void 0===keepDeviceValue&&(keepDeviceValue=!1),Statsig.getClientX().getLayer(layerName,keepDeviceValue)},Statsig.getLayerWithExposureLoggingDisabled=function(layerName,keepDeviceValue){return void 0===keepDeviceValue&&(keepDeviceValue=!1),Statsig.getClientX().getLayerWithExposureLoggingDisabled(layerName,keepDeviceValue)},Statsig.manuallyLogLayerParameterExposure=function(layerName,parameterName,keepDeviceValue){void 0===keepDeviceValue&&(keepDeviceValue=!1),Statsig.getClientX().logLayerParameterExposure(layerName,parameterName,keepDeviceValue)},Statsig.logEvent=function(eventName,value,metadata){return void 0===value&&(value=null),void 0===metadata&&(metadata=null),Statsig.getClientX().logEvent(eventName,value,metadata)},Statsig.updateUser=function(user){return Statsig.getClientX().updateUser(user)},Statsig.updateUserWithValues=function(user,values){return Statsig.getClientX().updateUserWithValues(user,values)},Statsig.shutdown=function(){Statsig.getClientX().shutdown(),Statsig.instance=null},Statsig.overrideGate=function(gateName,value){Statsig.getClientX().overrideGate(gateName,value)},Statsig.overrideConfig=function(configName,value){Statsig.getClientX().overrideConfig(configName,value)},Statsig.overrideLayer=function(layerName,value){Statsig.getClientX().overrideLayer(layerName,value)},Statsig.removeGateOverride=function(name){Statsig.getClientX().removeGateOverride(name)},Statsig.removeConfigOverride=function(name){Statsig.getClientX().removeConfigOverride(name)},Statsig.removeLayerOverride=function(name){Statsig.getClientX().removeLayerOverride(name)},Statsig.getAllOverrides=function(){return Statsig.getClientX().getAllOverrides()},Statsig.getStableID=function(){return Statsig.getClientX().getStableID()},Statsig.getEvaluationDetails=function(){var _a,_b;return null!==(_b=null===(_a=Statsig.instance)||void 0===_a?void 0:_a.getEvaluationDetails())&&void 0!==_b?_b:{reason:EvaluationReason_1.EvaluationReason.Uninitialized,time:0}},Statsig.removeOverride=function(name){Statsig.getClientX().removeOverride(name)},Statsig.getOverrides=function(){return Statsig.getClientX().getOverrides()},Statsig.initializeCalled=function(){return null!=Statsig.instance&&Statsig.instance.initializeCalled()},Statsig.flushEvents=function(){Statsig.getClientX().flushEvents()},Statsig.reenableAllLogging=function(){Statsig.getClientX().reenableAllLogging()},Statsig.getClientX=function(){if(!Statsig.instance)throw new Errors_1.StatsigUninitializedError;return Statsig.instance},Statsig.instance=null,Statsig}();exports.default=Statsig;