"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.useLayerImpl=exports.useExperimentImpl=exports.useConfigImpl=exports.useGateImpl=void 0;var react_1=require("react"),statsig_js_1=require("statsig-js"),StatsigContext_1=__importDefault(require("./StatsigContext")),Statsig_1=__importDefault(require("./Statsig"));function useGateImpl(gateName,options,exposureLoggingDisabled){void 0===exposureLoggingDisabled&&(exposureLoggingDisabled=!1);var _a=(0,react_1.useContext)(StatsigContext_1.default),initialized=_a.initialized,userVersion=_a.userVersion,initStarted=_a.initStarted;return{isLoading:!initialized,value:(0,react_1.useMemo)((function(){return!!initStarted&&(exposureLoggingDisabled?Statsig_1.default.checkGateWithExposureLoggingDisabled(gateName,options):Statsig_1.default.checkGate(gateName,null==options?void 0:options.ignoreOverrides))}),[initialized,initStarted,gateName,userVersion,options,exposureLoggingDisabled])}}function useConfigImpl(configName,options,exposureLoggingDisabled){void 0===exposureLoggingDisabled&&(exposureLoggingDisabled=!1);var _a=(0,react_1.useContext)(StatsigContext_1.default),initialized=_a.initialized,initStarted=_a.initStarted,userVersion=_a.userVersion;return{isLoading:!initialized,config:(0,react_1.useMemo)((function(){return initStarted?exposureLoggingDisabled?Statsig_1.default.getConfigWithExposureLoggingDisabled(configName,options):Statsig_1.default.getConfig(configName,null==options?void 0:options.ignoreOverrides):new statsig_js_1.DynamicConfig(configName,{},"",{time:Date.now(),reason:statsig_js_1.EvaluationReason.Uninitialized})}),[initialized,initStarted,configName,userVersion,options,exposureLoggingDisabled])}}function useExperimentImpl(experimentName,options,exposureLoggingDisabled){void 0===exposureLoggingDisabled&&(exposureLoggingDisabled=!1);var _a=(0,react_1.useContext)(StatsigContext_1.default),initialized=_a.initialized,initStarted=_a.initStarted,userVersion=_a.userVersion;return{isLoading:!initialized,config:(0,react_1.useMemo)((function(){return initStarted?exposureLoggingDisabled?Statsig_1.default.getExperimentWithExposureLoggingDisabled(experimentName,options):Statsig_1.default.getExperiment(experimentName,null==options?void 0:options.keepDeviceValue,null==options?void 0:options.ignoreOverrides):new statsig_js_1.DynamicConfig(experimentName,{},"",{time:Date.now(),reason:statsig_js_1.EvaluationReason.Uninitialized})}),[initialized,initStarted,experimentName,userVersion,options,exposureLoggingDisabled])}}function useLayerImpl(layerName,options,exposureLoggingDisabled){void 0===exposureLoggingDisabled&&(exposureLoggingDisabled=!1);var _a=(0,react_1.useContext)(StatsigContext_1.default),initialized=_a.initialized,initStarted=_a.initStarted,userVersion=_a.userVersion;return{isLoading:!initialized,layer:(0,react_1.useMemo)((function(){return initStarted?exposureLoggingDisabled?Statsig_1.default.getLayerWithExposureLoggingDisabled(layerName,options):Statsig_1.default.getLayer(layerName,null==options?void 0:options.keepDeviceValue):statsig_js_1.Layer._create(layerName,{},"",{time:Date.now(),reason:statsig_js_1.EvaluationReason.Uninitialized})}),[initialized,initStarted,layerName,userVersion,options,exposureLoggingDisabled])}}exports.useGateImpl=useGateImpl,exports.useConfigImpl=useConfigImpl,exports.useExperimentImpl=useExperimentImpl,exports.useLayerImpl=useLayerImpl;