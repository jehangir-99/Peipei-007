var __spreadArray=this&&this.__spreadArray||function(to,from){for(var i=0,il=from.length,j=to.length;i<il;i++,j++)to[j]=from[i];return to},__defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=function(obj,key,value){return key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value:value}):obj[key]=value},__spreadValues=function(a,b){for(var prop in b||(b={}))__hasOwnProp.call(b,prop)&&__defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var _i=0,_c=__getOwnPropSymbols(b);_i<_c.length;_i++){prop=_c[_i];__propIsEnum.call(b,prop)&&__defNormalProp(a,prop,b[prop])}return a},__spreadProps=function(a,b){return __defProps(a,__getOwnPropDescs(b))};import{coreModule,buildCreateApi}from"@reduxjs/toolkit/query";import{createSelector}from"@reduxjs/toolkit";import{useCallback,useDebugValue,useEffect as useEffect3,useLayoutEffect,useMemo as useMemo2,useRef as useRef3,useState}from"react";import{QueryStatus,skipToken}from"@reduxjs/toolkit/query";import{shallowEqual as shallowEqual2}from"react-redux";import{useEffect,useRef,useMemo}from"react";function useStableQueryArgs(queryArgs,serialize,endpointDefinition,endpointName){var incoming=useMemo((function(){return{queryArgs:queryArgs,serialized:"object"==typeof queryArgs?serialize({queryArgs:queryArgs,endpointDefinition:endpointDefinition,endpointName:endpointName}):queryArgs}}),[queryArgs,serialize,endpointDefinition,endpointName]),cache2=useRef(incoming);return useEffect((function(){cache2.current.serialized!==incoming.serialized&&(cache2.current=incoming)}),[incoming]),cache2.current.serialized===incoming.serialized?cache2.current.queryArgs:queryArgs}var UNINITIALIZED_VALUE=Symbol();import{useEffect as useEffect2,useRef as useRef2}from"react";import{shallowEqual}from"react-redux";function useShallowStableValue(value){var cache2=useRef2(value);return useEffect2((function(){shallowEqual(cache2.current,value)||(cache2.current=value)}),[value]),shallowEqual(cache2.current,value)?cache2.current:value}import{isPlainObject}from"@reduxjs/toolkit";var DefinitionType,cache=WeakMap?new WeakMap:void 0,defaultSerializeQueryArgs=function(_c){var endpointName=_c.endpointName,queryArgs=_c.queryArgs,serialized="",cached=null==cache?void 0:cache.get(queryArgs);if("string"==typeof cached)serialized=cached;else{var stringified=JSON.stringify(queryArgs,(function(key,value){return isPlainObject(value)?Object.keys(value).sort().reduce((function(acc,key2){return acc[key2]=value[key2],acc}),{}):value}));isPlainObject(queryArgs)&&(null==cache||cache.set(queryArgs,stringified)),serialized=stringified}return endpointName+"("+serialized+")"},useIsomorphicLayoutEffect="undefined"!=typeof window&&window.document&&window.document.createElement?useLayoutEffect:useEffect3,defaultMutationStateSelector=function(x){return x},noPendingQueryStateSelector=function(selected){return selected.isUninitialized?__spreadProps(__spreadValues({},selected),{isUninitialized:!1,isFetching:!0,isLoading:void 0===selected.data,status:QueryStatus.pending}):selected};function buildHooks(_c){var api=_c.api,_d=_c.moduleOptions,batch=_d.batch,useDispatch=_d.useDispatch,useSelector=_d.useSelector,useStore=_d.useStore,unstable__sideEffectsInRender=_d.unstable__sideEffectsInRender,serializeQueryArgs=_c.serializeQueryArgs,context=_c.context,usePossiblyImmediateEffect=unstable__sideEffectsInRender?function(cb){return cb()}:useEffect3;return{buildQueryHooks:function(name){var useQuerySubscription=function(arg,_c){var _d=void 0===_c?{}:_c,refetchOnReconnect=_d.refetchOnReconnect,refetchOnFocus=_d.refetchOnFocus,refetchOnMountOrArgChange=_d.refetchOnMountOrArgChange,_e=_d.skip,skip=void 0!==_e&&_e,_f=_d.pollingInterval,pollingInterval=void 0===_f?0:_f,initiate=api.endpoints[name].initiate,dispatch=useDispatch(),stableArg=useStableQueryArgs(skip?skipToken:arg,defaultSerializeQueryArgs,context.endpointDefinitions[name],name),stableSubscriptionOptions=useShallowStableValue({refetchOnReconnect:refetchOnReconnect,refetchOnFocus:refetchOnFocus,pollingInterval:pollingInterval}),lastRenderHadSubscription=useRef3(!1),promiseRef=useRef3(),_g=promiseRef.current||{},queryCacheKey=_g.queryCacheKey,requestId=_g.requestId,currentRenderHasSubscription=!1;if(queryCacheKey&&requestId){var returnedValue=dispatch(api.internalActions.internal_probeSubscription({queryCacheKey:queryCacheKey,requestId:requestId}));if("production"!==process.env.NODE_ENV&&"boolean"!=typeof returnedValue)throw new Error('Warning: Middleware for RTK-Query API at reducerPath "'+api.reducerPath+'" has not been added to the store.\n    You must add the middleware for RTK-Query to function correctly!');currentRenderHasSubscription=!!returnedValue}var subscriptionRemoved=!currentRenderHasSubscription&&lastRenderHadSubscription.current;return usePossiblyImmediateEffect((function(){lastRenderHadSubscription.current=currentRenderHasSubscription})),usePossiblyImmediateEffect((function(){subscriptionRemoved&&(promiseRef.current=void 0)}),[subscriptionRemoved]),usePossiblyImmediateEffect((function(){var _a,lastPromise=promiseRef.current;if("undefined"!=typeof process&&"removeMeOnCompilation"===process.env.NODE_ENV&&console.log(subscriptionRemoved),stableArg===skipToken)return null==lastPromise||lastPromise.unsubscribe(),void(promiseRef.current=void 0);var lastSubscriptionOptions=null==(_a=promiseRef.current)?void 0:_a.subscriptionOptions;if(lastPromise&&lastPromise.arg===stableArg)stableSubscriptionOptions!==lastSubscriptionOptions&&lastPromise.updateSubscriptionOptions(stableSubscriptionOptions);else{null==lastPromise||lastPromise.unsubscribe();var promise=dispatch(initiate(stableArg,{subscriptionOptions:stableSubscriptionOptions,forceRefetch:refetchOnMountOrArgChange}));promiseRef.current=promise}}),[dispatch,initiate,refetchOnMountOrArgChange,stableArg,stableSubscriptionOptions,subscriptionRemoved]),useEffect3((function(){return function(){var _a;null==(_a=promiseRef.current)||_a.unsubscribe(),promiseRef.current=void 0}}),[]),useMemo2((function(){return{refetch:function(){var _a;if(!promiseRef.current)throw new Error("Cannot refetch a query that has not been started yet.");return null==(_a=promiseRef.current)?void 0:_a.refetch()}}}),[])},useLazyQuerySubscription=function(_c){var _d=void 0===_c?{}:_c,refetchOnReconnect=_d.refetchOnReconnect,refetchOnFocus=_d.refetchOnFocus,_e=_d.pollingInterval,pollingInterval=void 0===_e?0:_e,initiate=api.endpoints[name].initiate,dispatch=useDispatch(),_f=useState(UNINITIALIZED_VALUE),arg=_f[0],setArg=_f[1],promiseRef=useRef3(),stableSubscriptionOptions=useShallowStableValue({refetchOnReconnect:refetchOnReconnect,refetchOnFocus:refetchOnFocus,pollingInterval:pollingInterval});usePossiblyImmediateEffect((function(){var _a,_b,lastSubscriptionOptions=null==(_a=promiseRef.current)?void 0:_a.subscriptionOptions;stableSubscriptionOptions!==lastSubscriptionOptions&&(null==(_b=promiseRef.current)||_b.updateSubscriptionOptions(stableSubscriptionOptions))}),[stableSubscriptionOptions]);var subscriptionOptionsRef=useRef3(stableSubscriptionOptions);usePossiblyImmediateEffect((function(){subscriptionOptionsRef.current=stableSubscriptionOptions}),[stableSubscriptionOptions]);var trigger=useCallback((function(arg2,preferCacheValue){var promise;return void 0===preferCacheValue&&(preferCacheValue=!1),batch((function(){var _a;null==(_a=promiseRef.current)||_a.unsubscribe(),promiseRef.current=promise=dispatch(initiate(arg2,{subscriptionOptions:subscriptionOptionsRef.current,forceRefetch:!preferCacheValue})),setArg(arg2)})),promise}),[dispatch,initiate]);return useEffect3((function(){return function(){var _a;null==(_a=null==promiseRef?void 0:promiseRef.current)||_a.unsubscribe()}}),[]),useEffect3((function(){arg===UNINITIALIZED_VALUE||promiseRef.current||trigger(arg,!0)}),[arg,trigger]),useMemo2((function(){return[trigger,arg]}),[trigger,arg])},useQueryState=function(arg,_c){var _d=void 0===_c?{}:_c,_e=_d.skip,skip=void 0!==_e&&_e,selectFromResult=_d.selectFromResult,select=api.endpoints[name].select,stableArg=useStableQueryArgs(skip?skipToken:arg,serializeQueryArgs,context.endpointDefinitions[name],name),lastValue=useRef3(),selectDefaultResult=useMemo2((function(){return createSelector([select(stableArg),function(_,lastResult){return lastResult},function(_){return stableArg}],queryStatePreSelector)}),[select,stableArg]),querySelector=useMemo2((function(){return selectFromResult?createSelector([selectDefaultResult],selectFromResult):selectDefaultResult}),[selectDefaultResult,selectFromResult]),currentState=useSelector((function(state){return querySelector(state,lastValue.current)}),shallowEqual2),store=useStore(),newLastValue=selectDefaultResult(store.getState(),lastValue.current);return useIsomorphicLayoutEffect((function(){lastValue.current=newLastValue}),[newLastValue]),currentState};return{useQueryState:useQueryState,useQuerySubscription:useQuerySubscription,useLazyQuerySubscription:useLazyQuerySubscription,useLazyQuery:function(options){var _c=useLazyQuerySubscription(options),trigger=_c[0],arg=_c[1],queryStateResults=useQueryState(arg,__spreadProps(__spreadValues({},options),{skip:arg===UNINITIALIZED_VALUE})),info=useMemo2((function(){return{lastArg:arg}}),[arg]);return useMemo2((function(){return[trigger,queryStateResults,info]}),[trigger,queryStateResults,info])},useQuery:function(arg,options){var querySubscriptionResults=useQuerySubscription(arg,options),queryStateResults=useQueryState(arg,__spreadValues({selectFromResult:arg===skipToken||(null==options?void 0:options.skip)?void 0:noPendingQueryStateSelector},options)),data=queryStateResults.data,status=queryStateResults.status,isLoading=queryStateResults.isLoading,isSuccess=queryStateResults.isSuccess,isError=queryStateResults.isError,error=queryStateResults.error;return useDebugValue({data:data,status:status,isLoading:isLoading,isSuccess:isSuccess,isError:isError,error:error}),useMemo2((function(){return __spreadValues(__spreadValues({},queryStateResults),querySubscriptionResults)}),[queryStateResults,querySubscriptionResults])}}},buildMutationHook:function(name){return function(_c){var _d=void 0===_c?{}:_c,_e=_d.selectFromResult,selectFromResult=void 0===_e?defaultMutationStateSelector:_e,fixedCacheKey=_d.fixedCacheKey,_f=api.endpoints[name],select=_f.select,initiate=_f.initiate,dispatch=useDispatch(),_g=useState(),promise=_g[0],setPromise=_g[1];useEffect3((function(){return function(){(null==promise?void 0:promise.arg.fixedCacheKey)||null==promise||promise.reset()}}),[promise]);var triggerMutation=useCallback((function(arg){var promise2=dispatch(initiate(arg,{fixedCacheKey:fixedCacheKey}));return setPromise(promise2),promise2}),[dispatch,initiate,fixedCacheKey]),requestId=(promise||{}).requestId,mutationSelector=useMemo2((function(){return createSelector([select({fixedCacheKey:fixedCacheKey,requestId:null==promise?void 0:promise.requestId})],selectFromResult)}),[select,promise,selectFromResult,fixedCacheKey]),currentState=useSelector(mutationSelector,shallowEqual2),originalArgs=null==fixedCacheKey?null==promise?void 0:promise.arg.originalArgs:void 0,reset=useCallback((function(){batch((function(){promise&&setPromise(void 0),fixedCacheKey&&dispatch(api.internalActions.removeMutationResult({requestId:requestId,fixedCacheKey:fixedCacheKey}))}))}),[dispatch,fixedCacheKey,promise,requestId]),endpointName=currentState.endpointName,data=currentState.data,status=currentState.status,isLoading=currentState.isLoading,isSuccess=currentState.isSuccess,isError=currentState.isError,error=currentState.error;useDebugValue({endpointName:endpointName,data:data,status:status,isLoading:isLoading,isSuccess:isSuccess,isError:isError,error:error});var finalState=useMemo2((function(){return __spreadProps(__spreadValues({},currentState),{originalArgs:originalArgs,reset:reset})}),[currentState,originalArgs,reset]);return useMemo2((function(){return[triggerMutation,finalState]}),[triggerMutation,finalState])}},usePrefetch:function(endpointName,defaultOptions){var dispatch=useDispatch(),stableDefaultOptions=useShallowStableValue(defaultOptions);return useCallback((function(arg,options){return dispatch(api.util.prefetch(endpointName,arg,__spreadValues(__spreadValues({},stableDefaultOptions),options)))}),[endpointName,dispatch,stableDefaultOptions])}};function queryStatePreSelector(currentState,lastResult,queryArgs){if((null==lastResult?void 0:lastResult.endpointName)&&currentState.isUninitialized){var endpointName=lastResult.endpointName,endpointDefinition=context.endpointDefinitions[endpointName];serializeQueryArgs({queryArgs:lastResult.originalArgs,endpointDefinition:endpointDefinition,endpointName:endpointName})===serializeQueryArgs({queryArgs:queryArgs,endpointDefinition:endpointDefinition,endpointName:endpointName})&&(lastResult=void 0)}var data=currentState.isSuccess?currentState.data:null==lastResult?void 0:lastResult.data;void 0===data&&(data=currentState.data);var hasData=void 0!==data,isFetching=currentState.isLoading,isLoading=!hasData&&isFetching,isSuccess=currentState.isSuccess||isFetching&&hasData;return __spreadProps(__spreadValues({},currentState),{data:data,currentData:currentState.data,isFetching:isFetching,isLoading:isLoading,isSuccess:isSuccess})}}function isQueryDefinition(e){return e.type===DefinitionType.query}function isMutationDefinition(e){return e.type===DefinitionType.mutation}function capitalize(str){return str.replace(str[0],str[0].toUpperCase())}function safeAssign(target){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];Object.assign.apply(Object,__spreadArray([target],args))}!function(DefinitionType2){DefinitionType2.query="query",DefinitionType2.mutation="mutation"}(DefinitionType||(DefinitionType={}));import{useDispatch as rrUseDispatch,useSelector as rrUseSelector,useStore as rrUseStore,batch as rrBatch}from"react-redux";var reactHooksModuleName=Symbol(),reactHooksModule=function(_c){var _d=void 0===_c?{}:_c,_e=_d.batch,batch=void 0===_e?rrBatch:_e,_f=_d.useDispatch,useDispatch=void 0===_f?rrUseDispatch:_f,_g=_d.useSelector,useSelector=void 0===_g?rrUseSelector:_g,_h=_d.useStore,useStore=void 0===_h?rrUseStore:_h,_j=_d.unstable__sideEffectsInRender,unstable__sideEffectsInRender=void 0!==_j&&_j;return{name:reactHooksModuleName,init:function(api,_c,context){var serializeQueryArgs=_c.serializeQueryArgs,anyApi=api,_d=buildHooks({api:api,moduleOptions:{batch:batch,useDispatch:useDispatch,useSelector:useSelector,useStore:useStore,unstable__sideEffectsInRender:unstable__sideEffectsInRender},serializeQueryArgs:serializeQueryArgs,context:context}),buildQueryHooks=_d.buildQueryHooks,buildMutationHook=_d.buildMutationHook,usePrefetch=_d.usePrefetch;return safeAssign(anyApi,{usePrefetch:usePrefetch}),safeAssign(context,{batch:batch}),{injectEndpoint:function(endpointName,definition){if(isQueryDefinition(definition)){var _c=buildQueryHooks(endpointName),useQuery=_c.useQuery,useLazyQuery=_c.useLazyQuery,useLazyQuerySubscription=_c.useLazyQuerySubscription,useQueryState=_c.useQueryState,useQuerySubscription=_c.useQuerySubscription;safeAssign(anyApi.endpoints[endpointName],{useQuery:useQuery,useLazyQuery:useLazyQuery,useLazyQuerySubscription:useLazyQuerySubscription,useQueryState:useQueryState,useQuerySubscription:useQuerySubscription}),api["use"+capitalize(endpointName)+"Query"]=useQuery,api["useLazy"+capitalize(endpointName)+"Query"]=useLazyQuery}else if(isMutationDefinition(definition)){var useMutation=buildMutationHook(endpointName);safeAssign(anyApi.endpoints[endpointName],{useMutation:useMutation}),api["use"+capitalize(endpointName)+"Mutation"]=useMutation}}}}}};export*from"@reduxjs/toolkit/query";import{configureStore}from"@reduxjs/toolkit";import{useEffect as useEffect4}from"react";import React from"react";import{Provider}from"react-redux";import{setupListeners}from"@reduxjs/toolkit/query";function ApiProvider(props){var store=React.useState((function(){var _c;return configureStore({reducer:(_c={},_c[props.api.reducerPath]=props.api.reducer,_c),middleware:function(gDM){return gDM().concat(props.api.middleware)}})}))[0];return useEffect4((function(){return!1===props.setupListeners?void 0:setupListeners(store.dispatch,props.setupListeners)}),[props.setupListeners,store.dispatch]),React.createElement(Provider,{store:store,context:props.context},props.children)}var createApi=buildCreateApi(coreModule(),reactHooksModule());export{ApiProvider,createApi,reactHooksModule};