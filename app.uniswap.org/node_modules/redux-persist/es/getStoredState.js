import{KEY_PREFIX}from"./constants";export default function getStoredState(config){var deserialize,transforms=config.transforms||[],storageKey="".concat(void 0!==config.keyPrefix?config.keyPrefix:KEY_PREFIX).concat(config.key),storage=config.storage,debug=config.debug;return deserialize=!1===config.deserialize?function(x){return x}:"function"==typeof config.deserialize?config.deserialize:defaultDeserialize,storage.getItem(storageKey).then((function(serialized){if(serialized)try{var state={},rawState=deserialize(serialized);return Object.keys(rawState).forEach((function(key){state[key]=transforms.reduceRight((function(subState,transformer){return transformer.out(subState,key,rawState)}),deserialize(rawState[key]))})),state}catch(err){throw"production"!==process.env.NODE_ENV&&debug&&console.log("redux-persist/getStoredState: Error restoring data ".concat(serialized),err),err}}))}function defaultDeserialize(serial){return JSON.parse(serial)}