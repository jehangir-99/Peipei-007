"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NodeRandomSource=void 0;const wipe_1=require("@stablelib/wipe");class NodeRandomSource{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,"undefined"!=typeof require){const nodeCrypto=require("crypto");nodeCrypto&&nodeCrypto.randomBytes&&(this._crypto=nodeCrypto,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(length){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let buffer=this._crypto.randomBytes(length);if(buffer.length!==length)throw new Error("NodeRandomSource: got fewer bytes than requested");const out=new Uint8Array(length);for(let i=0;i<out.length;i++)out[i]=buffer[i];return(0,wipe_1.wipe)(buffer),out}}exports.NodeRandomSource=NodeRandomSource;